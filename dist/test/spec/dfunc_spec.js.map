{"version":3,"sources":["../../../spec/dfunc_spec.js"],"names":["describe","it","func","dfunc","createFuncInstance","expect","to","be","ok","def","name","equal","params","length","defaultParams","func2","updateText","text","render","withDefaultParams","catIndex","getCategories","Arithmatic","greaterThan","updateParam"],"mappings":"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","file":"dfunc_spec.js","sourcesContent":["import dfunc from '../dfunc';\n\ndescribe('when creating func instance from func names', function() {\n  it('should return func instance', function() {\n    var func = dfunc.createFuncInstance('top');\n    expect(func).to.be.ok;\n    expect(func.def.name).to.equal('top');\n    expect(func.def.params.length).to.equal(3);\n    expect(func.def.defaultParams.length).to.equal(3);\n  });\n\n\n  it('should return func instance from funcDef', function() {\n    var func = dfunc.createFuncInstance('top');\n    var func2 = dfunc.createFuncInstance(func.def);\n    expect(func2).to.be.ok;\n  });\n\n  it('func instance should have text representation', function() {\n    var func = dfunc.createFuncInstance('top');\n    func.params[0] = 5;\n    func.params[1] = 'mean';\n    func.params[2] = 'dir';\n    func.updateText();\n    expect(func.text).to.equal(\"top(5, mean, dir)\");\n  });\n});\n\ndescribe('when rendering func instance', function() {\n\n  it('should handle single metric param', function() {\n    var func = dfunc.createFuncInstance('abs');\n    expect(func.render('a')).to.equal(\"abs(a)\");\n  });\n\n  it('should include default params if options enable it', function() {\n    var func = dfunc.createFuncInstance('top', { withDefaultParams: true });\n    expect(func.render('a')).to.equal(\"top(a, 5, mean, dir)\");\n  });\n\n  it('should handle int or interval params with number', function() {\n    var func = dfunc.createFuncInstance('anomalies');\n    func.params[0] = 'basic';\n    func.params[1] = '5';\n    expect(func.render('hello')).to.equal(\"anomalies(hello, basic, 5)\");\n  });\n\n});\n\ndescribe('when requesting function categories', function() {\n  it('should return function categories', function() {\n    var catIndex = dfunc.getCategories();\n    expect(catIndex.Arithmatic.length).to.be.greaterThan(3);\n  });\n});\n\ndescribe('when updating func param', function() {\n  it('should update param value and update text representation', function() {\n    var func = dfunc.createFuncInstance('top', { withDefaultParams: true });\n    func.updateParam('10', 0);\n    expect(func.params[0]).to.be.equal('10');\n    func.updateText();\n    expect(func.text).to.be.equal('top(10, mean, dir)');\n  });\n\n  it('should parse numbers as float', function() {\n    var func = dfunc.createFuncInstance('outliers');\n    func.updateParam('0.5', 1);\n    expect(func.params[1]).to.be.equal('0.5');\n  });\n});\n\ndescribe('when updating func param with optional second parameter', function() {\n  it('should update value and text', function() {\n    var func = dfunc.createFuncInstance('fill');\n    func.updateParam('null', 0);\n    expect(func.params[0]).to.be.equal('null');\n  });\n});\n"]}